function checkUniqueEnroll(){var n=!0;return $("#firstiev").val()!=""&&($("#secondiev").val()!=""&&$("#firstiev").val()==$("#secondiev").val()&&(n=!1),$("#thirdiev").val()!=""&&$("#firstiev").val()==$("#thirdiev").val()&&(n=!1)),$("#secondiev").val()!=""&&$("#thirdiev").val()!=""&&$("#secondiev").val()==$("#thirdiev").val()&&(n=!1),n}function checkUniqueEnrollA(){var n=!0;return $("#afirstiev").val()!=""&&($("#asecondiev").val()!=""&&$("#afirstiev").val()==$("#asecondiev").val()&&(n=!1),$("#athirdiev").val()!=""&&$("#afirstiev").val()==$("#athirdiev").val()&&(n=!1)),$("#asecondiev").val()!=""&&$("#athirdiev").val()!=""&&$("#asecondiev").val()==$("#athirdiev").val()&&(n=!1),n}function loadMainPage(){$("#mainContent").fadeOut(200,function(){$.ajax({url:"login.html",cache:!1}).done(function(n){$("#mainContent").html(n);$("#mainContent").fadeIn(200);$("#refreshState").fadeOut(200);$(".tooltipped").tooltip({delay:50})}).fail(function(n,t,i){$("#refreshState").fadeOut(200);a.currentTime=0;a.play();Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3)})})}function loadHelpPage(){$("#mainContent").fadeOut(200,function(){$.ajax({url:"help.html",cache:!1}).done(function(n){$("#mainContent").html(n);$("#mainContent").fadeIn(200);$("#refreshState").fadeOut(200);$(".collapsible").collapsible({accordion:!0})}).fail(function(n,t,i){$("#refreshState").fadeOut(200);a.currentTime=0;a.play();Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3)})})}function loadAboutPage(){$("#mainContent").fadeOut(200,function(){$.ajax({url:"about.html",cache:!1}).done(function(n){$("#mainContent").html(n);$("#mainContent").fadeIn(200);$("#refreshState").fadeOut(200);$(".collapsible").collapsible({accordion:!0})}).fail(function(n,t,i){$("#refreshState").fadeOut(200);a.currentTime=0;a.play();Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3)})})}function loadEventsPage(){$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px");$("#mainContent").fadeOut(200,function(){$.ajax({url:"events.html",cache:!1}).done(function(n){return $("#mainContent").html(n),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),$("#grade").material_select(),$("#eid").characterCounter(),$("ul.tabs").tabs(),$("#actionBar").css("box-shadow","none"),$(".tooltipped").tooltip({delay:50}),!0}).fail(function(n){return n.status==404?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):n.status==403&&($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.timeout,2e3),location.replace("#")),!1})})}function loadEntriesPage(){$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px");$("#mainContent").fadeOut(200,function(){$.ajax({url:"entries.html",cache:!1}).done(function(n){return $("#mainContent").html(n),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),$("#cls").material_select(),$(".tooltipped").tooltip({delay:50}),!0}).fail(function(n){return n.status==404?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):n.status==403&&($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.timeout,2e3),location.replace("#")),!1})})}function loadStatPage(){$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px");$("#mainContent").fadeOut(200,function(){$.ajax({url:"stat.html",cache:!1}).done(function(n){return $("#mainContent").html(n),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),!0}).fail(function(n){return n.status==404?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):n.status==403&&($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.timeout,2e3),location.replace("#")),!1})})}function loadEnrollPage(){$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px");$("#mainContent").fadeOut(200,function(){$.ajax({url:"enroll.html",cache:!1}).done(function(n){return $("#mainContent").html(n),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),$(".matsel").material_select(),$("ul.tabs").tabs(),$("#actionBar").css("box-shadow","none"),$(".tooltipped").tooltip({delay:50}),!0}).fail(function(n){return n.status==404?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):n.status==403&&($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.timeout,2e3),location.replace("#")),!1})})}function setActionBarTitle(n,t){$("#abMainTitle").text(n);$("#abSubTitle").text(t);t==""?($("#abMainTitle").animate({top:18},{queue:!1,duration:200}),$("#abSubTitle").fadeOut(200)):($("#abMainTitle").animate({top:6},{queue:!1,duration:200}),$("#abSubTitle").fadeIn(200))}function setBackButtonVisible(n){n?($("#backButton").css({left:0}),$("#abMainTitle").animate({left:58},{queue:!1,duration:175}),$("#abSubTitle").animate({left:58},{queue:!1,duration:175})):($("#backButton").css({left:-56}),$("#abMainTitle").animate({left:12},{queue:!1,duration:175}),$("#abSubTitle").animate({left:12},{queue:!1,duration:175}))}function tryCaptcha(n){captchaValue=n;console.log(n)}function captchaExp(){captchaValue="";b.currentTime=0;b.play();Materialize.toast(lang.verification_timeout,2e3);console.log("captcha expired")}function checkLockPwd(){olocked?($("#validatinglockpwd").show(),$.ajax({url:"checklockpwd.html",data:{pwd:$("#lockpwdinp").val()},dataType:"json",method:"post",cache:!1}).done(function(n){$("#validatinglockpwd").hide();n.success==1?($("#modal6").closeModal(),$("#updateentry").click()):(c.currentTime=0,c.play(),$("#errortext").text(lang.lock_pwd_incorrect))})):$("#lockpwdinp").val()==""?(c.currentTime=0,c.play(),$("#errortext").text(lang.lock_pwd_blank)):$("#lockpwdinp").val().length<6?(c.currentTime=0,c.play(),$("#errortext").text(lang.lock_pwd_length)):($("#lockpwd").val($("#lockpwdinp").val()),$("#modal6").closeModal(),$("#updateentry").click())}function timerIncrement(){loggedin&&(idleTime++,idleTime>599?($("#modal7").closeModal(),idleWarningShown=!1,$("#refreshState").fadeIn(200),$.ajax({url:"logout.html",cache:!1}).done(function(){location.replace("#");o.play();usertype="";captchaValue="";Materialize.toast(lang.logout,2e3);loadMainPage()}).fail(function(n,t,i){$("#refreshState").fadeOut(200);Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3);a.currentTime=0;a.play()}),$("#modal8").openModal({in_duration:200,out_duration:100})):idleTime>479&&(idleWarningShown||($("#modal7").openModal({in_duration:200,out_duration:100}),idleWarningShown=!0),$("#idlecount").text(600-idleTime)))}var usertype,recaptchaAvailable=!1,captchaValue,onloadCallback;location.hash="";var a=new Audio("err.wav"),b=new Audio("notice.wav"),c=new Audio("warn.wav"),i=new Audio("in.wav"),o=new Audio("out.wav"),olocked=!1,idleTime=0,idleWarningShown=!1,loggedin=!1;$(function(){var r=setInterval(timerIncrement,1e3),n,t;$(this).mousemove(function(){idleTime=0;idleWarningShown&&($("#modal7").closeModal(),idleWarningShown=!1)});$(this).keypress(function(){idleTime=0;idleWarningShown&&($("#modal7").closeModal(),idleWarningShown=!1)});$("#refreshState").show();$.ajax({url:"login.html",cache:!1}).done(function(n){$("#mainContent").html(n);$("#mainContent").fadeIn(200);$("#refreshState").fadeOut(200)});$("#menuButton").show();n="";$("#menuButton").dropdown({inDuration:150,outDuration:113,constrain_width:!1,hover:!1,gutter:0,belowOrigin:!1,alignment:"right"});is.ie()&&$("#modal4").openModal({in_duration:200,out_duration:100});t=$(".dropdown-content li *");setInterval(function(){t.addClass("waves-effect")},1e3);$(document).contextmenu(function(n){location.hash.replace("#","")!="help"&&location.hash.replace("#","")!="about"&&$("#menuButton").click();n.preventDefault()});$(window).on("hashchange",function(){is.ie()&&$("#modal4").openModal({in_duration:200,out_duration:100});$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px");var t=location.hash.replace("#","");t!=n&&($("#modal1").closeModal(),$("#modal2").closeModal(),$("#modal3").closeModal(),t==""?($("#menuButton").show(),$("#refButton").css("right",48),setActionBarTitle(lang.title,""),setBackButtonVisible(!1),$("#refreshState").fadeIn(200),n="",loadMainPage()):t=="help"?($("#menuButton").hide(),$("#refButton").css("right",8),setActionBarTitle(lang.title,lang.help_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="help",loadHelpPage()):t=="about"?($("#menuButton").hide(),$("#refButton").css("right",8),setActionBarTitle(lang.title,lang.about_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="about",loadAboutPage()):usertype!=undefined&&usertype!=""?($("#menuButton").show(),$("#refButton").css("right",48),t=="events"?usertype=="admin"?(setActionBarTitle(lang.title,lang.manage_ev_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="events",loadEventsPage()):(Materialize.toast(lang.page_no_priv,2e3),history.back(),c.currentTime=0,c.play()):t=="enroll"?(setActionBarTitle(lang.title,lang.enroll_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="enroll",loadEnrollPage()):t=="stat"?(setActionBarTitle(lang.title,lang.stat_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="enroll",loadStatPage()):t=="entries"?usertype=="admin"||usertype=="helper"?(setActionBarTitle(lang.title,lang.manage_entry_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="entries",loadEntriesPage()):(Materialize.toast(lang.page_no_priv,2e3),history.back(),c.currentTime=0,c.play()):(Materialize.toast(lang.no_fn_found,2e3),history.back(),c.currentTime=0,c.play())):(Materialize.toast(lang.login_required,2e3),history.back(),c.currentTime=0,c.play()))});$("#refButton").click(function(){is.ie()&&$("#modal4").openModal({in_duration:200,out_duration:100});$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px");var t=location.hash.replace("#","");$("#modal1").closeModal();$("#modal2").closeModal();$("#modal3").closeModal();t==""?($("#menuButton").show(),$("#refButton").css("right",48),setActionBarTitle(lang.title,""),setBackButtonVisible(!1),$("#refreshState").fadeIn(200),n="",loadMainPage()):t=="help"?($("#menuButton").hide(),$("#refButton").css("right",8),setActionBarTitle(lang.title,lang.help_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="help",loadHelpPage()):t=="about"?($("#menuButton").hide(),$("#refButton").css("right",8),setActionBarTitle(lang.title,lang.about_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="about",loadAboutPage()):usertype!=undefined&&usertype!=""?($("#menuButton").show(),$("#refButton").css("right",48),t=="events"?usertype=="admin"?(setActionBarTitle(lang.title,lang.manage_ev_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="events",loadEventsPage()):(Materialize.toast(lang.page_no_priv,2e3),history.back(),c.currentTime=0,c.play()):t=="enroll"?(setActionBarTitle(lang.title,lang.enroll_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="enroll",loadEnrollPage()):t=="stat"?(setActionBarTitle(lang.title,lang.stat_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="enroll",loadStatPage()):t=="entries"?usertype=="admin"||usertype=="helper"?(setActionBarTitle(lang.title,lang.manage_entry_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),n="entries",loadEntriesPage()):(Materialize.toast(lang.page_no_priv,2e3),history.back(),c.currentTime=0,c.play()):(Materialize.toast(lang.no_fn_found,2e3),history.back(),c.currentTime=0,c.play())):(Materialize.toast(lang.login_required,2e3),history.back(),c.currentTime=0,c.play())});$("#backButton").click(function(){history.back()});$(document).on("click","#cfull",function(){var n=document.getElementById("chart");n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()});$(document).on("click","#addev",function(){$("#eid").val()==""||$("#ename").val()==""||$("#cname").val()==""?(c.currentTime=0,c.play(),Materialize.toast(lang.all_fields_required,2e3)):($("#refreshState").fadeIn(200),$.ajax({url:"handleEvent.html?method=post",data:{id:$("#eid").val(),grade:$("#grade").val(),ename:$("#ename").val(),cname:$("#cname").val(),type:$("#relay").prop("checked")?"R":"I"},dataType:"json",method:"post",cache:!1}).done(function(n){n.success==1?(Materialize.toast(lang.item_added,2e3),loadEventsPage(),o.currentTime=0,o.play()):n.success==0?($("#refreshState").fadeOut(200),n.error.code==1062?(Materialize.toast(lang.duplicate,2e3),c.currentTime=0,c.play()):(Materialize.toast(lang.error+"("+n.error.code+")"+n.error.message,2e3),c.currentTime=0,c.play())):n.success==-2&&($("#refreshState").fadeOut(200),Materialize.toast(lang.action_no_priv,2e3),a.currentTime=0,a.play())}).fail(function(n,t,i){$("#refreshState").fadeOut(200);Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3);c.currentTime=0;c.play()}))});$(document).on("click","#updateentry:not(.disabled)",function(){checkUniqueEnroll()?($("#updateentry").addClass("disabled"),$("#refreshState").fadeIn(200),$.ajax({url:"handleEnroll.html",data:{firstiev:$("#firstiev").val(),secondiev:$("#secondiev").val(),thirdiev:$("#thirdiev").val(),rev:$("#rev").val().join(),locked:$("#lockentry").prop("checked")?"1":"0",lockpwd:$("#lockpwd").val()},dataType:"json",method:"post",cache:!1}).done(function(n){$("#updateentry").removeClass("disabled");n.success==1?(Materialize.toast(lang.item_updated,2e3),loadEnrollPage(),o.currentTime=0,o.play()):n.success==0&&($("#refreshState").fadeOut(200),Materialize.toast(lang.error+"("+n.error.code+")"+n.error.message,2e3),a.currentTime=0,a.play())}).fail(function(n,t,i){$("#updateentry").removeClass("disabled");$("#refreshState").fadeOut(200);Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3);a.currentTime=0;a.play()})):($("#modal5").openModal({in_duration:200,out_duration:100}),c.currentTime=0,c.play())});$(document).on("change","#lockentry",function(){olocked?$("#lockentry").prop("checked")==!1&&($("#lockpwdinp").val(""),$("#errortext").text(""),$("#modal6").attr("data-mode","validate"),$("#modal6").openModal({dismissible:!1,in_duration:200,out_duration:100})):$("#lockentry").prop("checked")==!0?($("#lockpwdinp").val(""),$("#errortext").text(""),$("#modal6").attr("data-mode","create"),$("#modal6").openModal({dismissible:!1,in_duration:200,out_duration:100})):$("#lockpwd").val("")});$(document).on("click","#editent",function(){checkUniqueEnrollA()?($("#refreshState").fadeIn(200),$.ajax({url:"handleEnrollA.html",data:{firstiev:$("#afirstiev").val(),secondiev:$("#asecondiev").val(),thirdiev:$("#athirdiev").val(),rev:$("#rev").val().join(),id:$("#modal3").attr("data-id"),locked:$("#alockentry").prop("checked")?"1":"0"},dataType:"json",method:"post",cache:!1}).done(function(n){n.success==1?(Materialize.toast(lang.item_updated,2e3),$("#refreshState").fadeOut(200),o.currentTime=0,o.play()):n.success==0&&($("#refreshState").fadeOut(200),Materialize.toast(lang.error+"("+n.error.code+")"+n.error.message,2e3),a.currentTime=0,a.play())}).fail(function(n,t,i){$("#refreshState").fadeOut(200);Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3);a.currentTime=0;a.play()})):(Materialize.toast(lang.duplicate_selection,2e3),c.currentTime=0,c.play())});$(document).on("click","#confirm:not(.disabled)",function(){$("#refreshState").fadeIn(200);$("#confirm").addClass("disabled");$("#u").prop("disabled",!0);$("#u").material_select();$("#p").prop("disabled",!0);$("#n").prop("disabled",!0);$.ajax({url:"handleLogin.html",data:{u:$("#u").val(),p:$("#p").val(),n:$("#n").val(),c:captchaValue},dataType:"json",method:"post",cache:!1}).done(function(n){typeof n=="string"?console.log(n):($("#confirm").removeClass("disabled"),$("#u").prop("disabled",!1),$("#u").material_select(),$("#p").prop("disabled",!1),$("#n").prop("disabled",!1),n.success==1?(usertype=n.type,Materialize.toast(lang.login_success,2e3),loadMainPage(),i.play()):n.success==0?($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_pwd,2e3),c.currentTime=0,c.play()):n.success==-1?($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_unknown,2e3),a.currentTime=0,a.play()):n.success==-2?($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_missing_info,2e3),b.currentTime=0,b.play()):n.success==-3?($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_not_ready,2e3),c.currentTime=0,c.play()):n.success==-4&&($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_verification,2e3),console.log(n.error),console.log(n.jsontext),c.currentTime=0,c.play()))}).fail(function(n,t,i){$("#confirm").removeClass("disabled");$("#u").prop("disabled",!1);$("#p").prop("disabled",!1);$("#refreshState").fadeOut(200);console.log(n.responseText);Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3);a.currentTime=0;a.play()})});$(document).on("click","#logoutLink",function(){$("#refreshState").fadeIn(200);$.ajax({url:"logout.html",cache:!1}).done(function(){o.play();usertype="";captchaValue="";Materialize.toast(lang.logout,2e3);loadMainPage()}).fail(function(n,t,i){$("#refreshState").fadeOut(200);Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3);a.currentTime=0;a.play()})});$(document).on("click","#selent",function(){$("#refreshState").fadeIn(200);$.ajax({url:"editEntry.html",cache:!1,method:"post",data:{cls:$("#cls").val(),num:$("#num").val()}}).done(function(n){$("#entryDetails").html(n);$("#refreshState").fadeOut(200);$(".matsel").material_select();$("#modal3").openModal({in_duration:200,out_duration:100})})});$(document).on("change","#firstiev",function(){$(".matsel").material_select("destroy");$("#firstiev").val()==""?($("#firstiev").val($("#secondiev").val()),$("#secondiev").val($("#thirdiev").val()),$("#thirdiev").val(""),$("#firstiev").val()==""&&$("#secondiev").prop("disabled",!0),$("#secondiev").val()==""&&$("#thirdiev").prop("disabled",!0)):$("#secondiev").prop("disabled",!1);$(".matsel").material_select()});$(document).on("change","#secondiev",function(){$(".matsel").material_select("destroy");$("#secondiev").val()==""?($("#secondiev").val($("#thirdiev").val()),$("#thirdiev").val(""),$("#secondiev").val()==""&&$("#thirdiev").prop("disabled",!0)):$("#thirdiev").prop("disabled",!1);$(".matsel").material_select()});$(document).on("change","#afirstiev",function(){$(".matsel").material_select("destroy");$("#afirstiev").val()==""?($("#afirstiev").val($("#asecondiev").val()),$("#asecondiev").val($("#athirdiev").val()),$("#athirdiev").val(""),$("#afirstiev").val()==""&&$("#asecondiev").prop("disabled",!0),$("#asecondiev").val()==""&&$("#athirdiev").prop("disabled",!0)):$("#asecondiev").prop("disabled",!1);$(".matsel").material_select()});$(document).on("change","#asecondiev",function(){$(".matsel").material_select("destroy");$("#asecondiev").val()==""?($("#asecondiev").val($("#thirdiev").val()),$("#athirdiev").val(""),$("#asecondiev").val()==""&&$("#athirdiev").prop("disabled",!0)):$("#athirdiev").prop("disabled",!1);$(".matsel").material_select()});$(document).on("click",".delete-link",function(){$("#modal2").attr("data-id",$(this).attr("data-id"));$("#refreshState").fadeIn(200);$.ajax({url:"eventDetails.html",data:{id:$(this).attr("data-id")},dataType:"json",method:"post",cache:!1}).done(function(n){$("#eeid").removeClass("active");$("#eename").removeClass("active");$("#ecname").removeClass("active");$("#eeid").val(n.id);$("#egrade").val(n.grade);$("#eename").val(n.ename);$("#ecname").val(n.cname);$("#eeid").addClass("active");$("#eename").addClass("active");$("#ecname").addClass("active");$("#erelay").prop("checked",n.type=="R");$("#modal2").openModal({in_duration:200,out_duration:100});$("#refreshState").fadeOut(200);$("#egrade").material_select();$("#eeid").characterCounter()}).fail(function(n,t,i){$("#refreshState").fadeOut(200);a.currentTime=0;a.play();Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3)})});$(document).on("click","#refEvents",function(){$("#refreshState").fadeIn(200);loadEventsPage()});$(document).on("click","#refEnroll",function(){$("#refreshState").fadeIn(200);loadEnrollPage()});$(document).on("click","#refStat",function(){$("#refreshState").fadeIn(200);loadStatPage()});$(document).on("click","#delev",function(){c.currentTime=0;c.play();$("#deleid").text($("#modal2").attr("data-id"));$("#modal1").attr("data-id",$("#modal2").attr("data-id"));$("#modal2").closeModal();$("#modal1").openModal({in_duration:200,out_duration:100})});$("#modal1 .no-btn").click(function(){$("#modal2").openModal({in_duration:200,out_duration:100})});$("#modal1 .yes-btn").click(function(){$("#refreshState").fadeIn(200);$.ajax({url:"handleEvent.html?method=delete",data:{id:$("#modal1").attr("data-id")},dataType:"json",method:"post",cache:!1}).done(function(n){n.success==1?(o.currentTime=0,o.play(),Materialize.toast(lang.item_deleted,2e3),loadEventsPage()):n.success==0?($("#refreshState").fadeOut(200),c.currentTime=0,c.play(),Materialize.toast(lang.error+"("+n.error.code+")"+n.error.message,2e3)):n.success==-2&&($("#refreshState").fadeOut(200),c.currentTime=0,c.play(),Materialize.toast(lang.action_no_priv,2e3))}).fail(function(n,t,i){$("#refreshState").fadeOut(200);a.currentTime=0;a.play();Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3)})});$("#editev").click(function(){$("#refreshState").fadeIn(200);console.log($("#erelay").prop("checked")?"R":"I");$.ajax({url:"handleEvent.html?method=put",data:{id:$("#modal2").attr("data-id"),grade:$("#egrade").val(),ename:$("#eename").val(),cname:$("#ecname").val(),type:$("#erelay").prop("checked")?"R":"I"},dataType:"json",method:"post",cache:!1}).done(function(n){n.success==1?(o.currentTime=0,o.play(),console.log(n.q),Materialize.toast(lang.item_updated,2e3),loadEventsPage()):n.success==0?($("#refreshState").fadeOut(200),c.currentTime=0,c.play(),Materialize.toast(lang.error+"("+n.error.code+")"+n.error.message,2e3)):n.success==-2&&($("#refreshState").fadeOut(200),c.currentTime=0,c.play(),Materialize.toast(lang.action_no_priv,2e3))}).fail(function(n,t,i){$("#refreshState").fadeOut(200);a.currentTime=0;a.play();Materialize.toast(n.status==404?lang.network_error:lang.error+i,2e3)})})});captchaValue="";onloadCallback=function(){recaptchaAvailable=!0;recaptchacontainer&&grecaptcha.render(recaptchacontainer,{sitekey:"6LcbNxMTAAAAAJqw8rngqBFCofxVjUNdfzay7Rxj",callback:tryCaptcha,"expired-callback":captchaExp,type:"audio"})};