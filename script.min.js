function checkUniqueEnroll(){var e=!0;return""!=$("#firstiev").val()&&(""!=$("#secondiev").val()&&$("#firstiev").val()==$("#secondiev").val()&&(e=!1),""!=$("#thirdiev").val()&&$("#firstiev").val()==$("#thirdiev").val()&&(e=!1)),""!=$("#secondiev").val()&&""!=$("#thirdiev").val()&&$("#secondiev").val()==$("#thirdiev").val()&&(e=!1),e}function checkUniqueEnrollA(){var e=!0;return""!=$("#afirstiev").val()&&(""!=$("#asecondiev").val()&&$("#afirstiev").val()==$("#asecondiev").val()&&(e=!1),""!=$("#athirdiev").val()&&$("#afirstiev").val()==$("#athirdiev").val()&&(e=!1)),""!=$("#asecondiev").val()&&""!=$("#athirdiev").val()&&$("#asecondiev").val()==$("#athirdiev").val()&&(e=!1),e}function loadMainPage(){$("#mainContent").fadeOut(200,function(){$.ajax({url:"login.html",cache:!1}).done(function(e){$("#mainContent").html(e),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),$(".tooltipped").tooltip({delay:50})}).fail(function(e,t,r){404==x.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):500==x.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.system_error,2e3)):($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.error+r,2e3))})})}function loadHelpPage(){$("#mainContent").fadeOut(200,function(){$.ajax({url:"help.html",cache:!1}).done(function(e){$("#mainContent").html(e),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),$(".collapsible").collapsible({accordion:!0})}).fail(function(e,t,r){404==x.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):500==x.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.system_error,2e3)):($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.error+r,2e3))})})}function loadAboutPage(){$("#mainContent").fadeOut(200,function(){$.ajax({url:"about.html",cache:!1}).done(function(e){$("#mainContent").html(e),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),$(".collapsible").collapsible({accordion:!0})}).fail(function(e,t,r){404==x.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):500==x.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.system_error,2e3)):($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.error+r,2e3))})})}function loadEventsPage(){$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px"),$("#mainContent").fadeOut(200,function(){$.ajax({url:"events.html",cache:!1}).done(function(e){return $("#mainContent").html(e),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),$("#grade").material_select(),$("#eid").characterCounter(),$("ul.tabs").tabs(),$("#actionBar").css("box-shadow","none"),$(".tooltipped").tooltip({delay:50}),!0}).fail(function(e,t,r){return 404==e.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):403==e.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.timeout,2e3),location.replace("#")):500==e.status&&($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.system_error,2e3)),!1})})}function loadEntriesPage(){$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px"),$("#mainContent").fadeOut(200,function(){$.ajax({url:"entries.html",cache:!1}).done(function(e){return $("#mainContent").html(e),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),$("#cls").material_select(),$(".tooltipped").tooltip({delay:50}),!0}).fail(function(e,t,r){return 404==e.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):403==e.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.timeout,2e3),location.replace("#")):500==e.status&&($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.system_error,2e3)),!1})})}function loadStatPage(){$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px"),$("#mainContent").fadeOut(200,function(){$.ajax({url:"stat.html",cache:!1}).done(function(e){return $("#mainContent").html(e),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),!0}).fail(function(e,t,r){return 404==e.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):403==e.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.timeout,2e3),location.replace("#")):500==e.status&&($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.system_error,2e3)),!1})})}function loadHelperPage(){$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px"),$("#mainContent").fadeOut(200,function(){$.ajax({url:"helper.html",cache:!1}).done(function(e){return $("#mainContent").html(e),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),$(".matsel").material_select(),$("ul.tabs").tabs(),$("#actionBar").css("box-shadow","none"),!0}).fail(function(e,t,r){return 404==e.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):403==e.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.timeout,2e3),location.replace("#")):500==e.status&&($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.system_error,2e3)),!1})})}function loadEnrollPage(){$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px"),$("#mainContent").fadeOut(200,function(){$.ajax({url:"enroll.html",cache:!1}).done(function(e){return $("#mainContent").html(e),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200),$(".matsel").material_select(),$("ul.tabs").tabs(),$("#actionBar").css("box-shadow","none"),$(".tooltipped").tooltip({delay:50}),!0}).fail(function(e,t,r){return 404==e.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.network_error,2e3)):403==e.status?($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.timeout,2e3),location.replace("#")):500==e.status&&($("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(lang.system_error,2e3)),!1})})}function setActionBarTitle(e,a){$("#abMainTitle").text(e),$("#abSubTitle").text(a),""==a?($("#abMainTitle").animate({top:18},{queue:!1,duration:200}),$("#abSubTitle").fadeOut(200)):($("#abMainTitle").animate({top:6},{queue:!1,duration:200}),$("#abSubTitle").fadeIn(200))}function setBackButtonVisible(e){e?($("#backButton").css({left:0}),$("#abMainTitle").animate({left:58},{queue:!1,duration:175}),$("#abSubTitle").animate({left:58},{queue:!1,duration:175})):($("#backButton").css({left:-56}),$("#abMainTitle").animate({left:12},{queue:!1,duration:175}),$("#abSubTitle").animate({left:12},{queue:!1,duration:175}))}function tryCaptcha(e){captchaValue=e,console.log(e),$("#confirm").removeClass("disabled")}function captchaExp(e){captchaValue="",b.currentTime=0,b.play(),Materialize.toast(lang.verification_timeout,2e3),console.log("captcha expired"),$("#confirm").addClass("disabled")}function checkLockPwd(){olocked?($("#validatinglockpwd").show(),$.ajax({url:"checklockpwd.html",data:{pwd:$("#lockpwdinp").val()},dataType:"json",method:"post",cache:!1}).done(function(e){$("#validatinglockpwd").hide(),1==e.success?($("#modal6").closeModal(),$("#updateentry").click()):(c.currentTime=0,c.play(),$("#errortext").text(lang.lock_pwd_incorrect))})):""==$("#lockpwdinp").val()?(c.currentTime=0,c.play(),$("#errortext").text(lang.lock_pwd_blank)):$("#lockpwdinp").val().length<6?(c.currentTime=0,c.play(),$("#errortext").text(lang.lock_pwd_length)):($("#lockpwd").val($("#lockpwdinp").val()),$("#modal6").closeModal(),$("#updateentry").click())}function timerIncrement(){loggedin&&(idleTime++,idleTime>599?(loggedin=!1,$("#modal7").closeModal(),idleWarningShown=!1,$("#refreshState").fadeIn(200),$.ajax({url:"logout.html",cache:!1}).done(function(e){location.replace("#"),o.play(),usertype="",captchaValue="",Materialize.toast(lang.logout,2e3),loadMainPage()}).fail(function(e,t,r){$("#refreshState").fadeOut(200),Materialize.toast(404==e.status?lang.network_error:lang.error+r,2e3),a.currentTime=0,a.play()}),$("#modal8").openModal({in_duration:200,out_duration:100})):idleTime>479&&(idleWarningShown||($("#modal7").openModal({in_duration:200,out_duration:100}),idleWarningShown=!0),$("#idlecount").text(600-idleTime)))}var usertype,recaptchaAvailable=!1;location.hash="";var a=new Audio("err.wav"),b=new Audio("notice.wav"),c=new Audio("warn.wav"),i=new Audio("in.wav"),o=new Audio("out.wav"),olocked=!1,idleTime=0,idleWarningShown=!1,loggedin=!1;$(function(){setInterval(timerIncrement,1e3);$(this).mousemove(function(e){idleTime=0,idleWarningShown&&($("#modal7").closeModal(),idleWarningShown=!1)}),$(this).keypress(function(e){idleTime=0,idleWarningShown&&($("#modal7").closeModal(),idleWarningShown=!1)}),$("#refreshState").show(),$.ajax({url:"login.html",cache:!1}).done(function(e){$("#mainContent").html(e),$("#mainContent").fadeIn(200),$("#refreshState").fadeOut(200)}),$("#menuButton").show();var e="";$("#menuButton").dropdown({inDuration:150,outDuration:113,constrain_width:!1,hover:!1,gutter:0,belowOrigin:!1,alignment:"right"}),is.ie()&&$("#modal4").openModal({in_duration:200,out_duration:100});var t=$(".dropdown-content li *");setInterval(function(){t.addClass("waves-effect")},1e3),$(document).contextmenu(function(e){"help"!=location.hash.replace("#","")&&"about"!=location.hash.replace("#","")&&$("#menuButton").click(),e.preventDefault()}),$(window).on("hashchange",function(){is.ie()&&$("#modal4").openModal({in_duration:200,out_duration:100}),$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px");var a=location.hash.replace("#","");a!=e&&($("#modal1").closeModal(),$("#modal2").closeModal(),$("#modal3").closeModal(),""==a?($("#menuButton").show(),$("#refButton").css("right",48),$("#abMainTitle").css("right",96),setActionBarTitle(lang.title,""),setBackButtonVisible(!1),$("#refreshState").fadeIn(200),e="",loadMainPage()):"help"==a?($("#menuButton").hide(),$("#refButton").css("right",8),$("#abMainTitle").css("right",56),setActionBarTitle(lang.title,lang.help_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="help",loadHelpPage()):"about"==a?($("#menuButton").hide(),$("#refButton").css("right",8),$("#abMainTitle").css("right",56),setActionBarTitle(lang.title,lang.about_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="about",loadAboutPage()):void 0!=usertype&&""!=usertype?($("#menuButton").show(),$("#refButton").css("right",48),$("#abMainTitle").css("right",96),"events"==a?"admin"==usertype?(setActionBarTitle(lang.title,lang.manage_ev_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="events",loadEventsPage()):(Materialize.toast(lang.page_no_priv,2e3),history.back(),c.currentTime=0,c.play()):"enroll"==a?(setActionBarTitle(lang.title,lang.enroll_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="enroll",loadEnrollPage()):"stat"==a?(setActionBarTitle(lang.title,lang.stat_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="enroll",loadStatPage()):"helper"==a?(setActionBarTitle(lang.title,lang.helper_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="helper",loadHelperPage()):"entries"==a?"admin"==usertype||"helper"==usertype?(setActionBarTitle(lang.title,lang.manage_entry_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="entries",loadEntriesPage()):(Materialize.toast(lang.page_no_priv,2e3),history.back(),c.currentTime=0,c.play()):(Materialize.toast(lang.no_fn_found,2e3),history.back(),c.currentTime=0,c.play())):(Materialize.toast(lang.login_required,2e3),history.back(),c.currentTime=0,c.play()))}),$("#refButton").click(function(){is.ie()&&$("#modal4").openModal({in_duration:200,out_duration:100}),$("#actionBar").css("box-shadow","rgba(0, 0, 0, 0.25) 0px 2px 1px 0px");var a=location.hash.replace("#","");$("#modal1").closeModal(),$("#modal2").closeModal(),$("#modal3").closeModal(),""==a?($("#menuButton").show(),$("#refButton").css("right",48),setActionBarTitle(lang.title,""),setBackButtonVisible(!1),$("#refreshState").fadeIn(200),e="",loadMainPage()):"help"==a?($("#menuButton").hide(),$("#refButton").css("right",8),setActionBarTitle(lang.title,lang.help_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="help",loadHelpPage()):"about"==a?($("#menuButton").hide(),$("#refButton").css("right",8),setActionBarTitle(lang.title,lang.about_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="about",loadAboutPage()):void 0!=usertype&&""!=usertype?($("#menuButton").show(),$("#refButton").css("right",48),"events"==a?"admin"==usertype?(setActionBarTitle(lang.title,lang.manage_ev_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="events",loadEventsPage()):(Materialize.toast(lang.page_no_priv,2e3),history.back(),c.currentTime=0,c.play()):"enroll"==a?(setActionBarTitle(lang.title,lang.enroll_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="enroll",loadEnrollPage()):"stat"==a?(setActionBarTitle(lang.title,lang.stat_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="stat",loadStatPage()):"helper"==a?(setActionBarTitle(lang.title,lang.helper_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="helper",loadHelperPage()):"entries"==a?"admin"==usertype||"helper"==usertype?(setActionBarTitle(lang.title,lang.manage_entry_title),setBackButtonVisible(!0),$("#refreshState").fadeIn(200),e="entries",loadEntriesPage()):(Materialize.toast(lang.page_no_priv,2e3),history.back(),c.currentTime=0,c.play()):(Materialize.toast(lang.no_fn_found,2e3),history.back(),c.currentTime=0,c.play())):(Materialize.toast(lang.login_required,2e3),history.back(),c.currentTime=0,c.play())}),$("#backButton").click(function(){history.back()}),$(document).on("click","#cfull",function(){var e=document.getElementById("chart");e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}),$(document).on("click","#addev",function(){""==$("#eid").val()||""==$("#ename").val()||""==$("#cname").val()?(c.currentTime=0,c.play(),Materialize.toast(lang.all_fields_required,2e3)):($("#refreshState").fadeIn(200),$.ajax({url:"handleEvent.html?method=post",data:{id:$("#eid").val(),grade:$("#grade").val(),ename:$("#ename").val(),cname:$("#cname").val(),type:$("#relay").prop("checked")?"R":"I"},dataType:"json",method:"post",cache:!1}).done(function(e){1==e.success?(Materialize.toast(lang.item_added,2e3),loadEventsPage(),o.currentTime=0,o.play()):0==e.success?($("#refreshState").fadeOut(200),1062==e.error.code?(Materialize.toast(lang.duplicate,2e3),c.currentTime=0,c.play()):(Materialize.toast(lang.error+"("+e.error.code+")"+e.error.message,2e3),c.currentTime=0,c.play())):-2==e.success&&($("#refreshState").fadeOut(200),Materialize.toast(lang.action_no_priv,2e3),a.currentTime=0,a.play())}).fail(function(e,a,t){$("#refreshState").fadeOut(200),Materialize.toast(404==e.status?lang.network_error:lang.error+t,2e3),c.currentTime=0,c.play()}))}),$(document).on("click","#updateentry:not(.disabled)",function(){checkUniqueEnroll()?($("#updateentry").addClass("disabled"),$("#refreshState").fadeIn(200),$.ajax({url:"handleEnroll.html",data:{firstiev:$("#firstiev").val(),secondiev:$("#secondiev").val(),thirdiev:$("#thirdiev").val(),rev:$("#rev").val().join(),locked:$("#lockentry").prop("checked")?"1":"0",lockpwd:$("#lockpwd").val()},dataType:"json",method:"post",cache:!1}).done(function(e){$("#updateentry").removeClass("disabled"),1==e.success?(Materialize.toast(lang.item_updated,2e3),loadEnrollPage(),o.currentTime=0,o.play()):0==e.success&&($("#refreshState").fadeOut(200),Materialize.toast(lang.error+"("+e.error.code+")"+e.error.message,2e3),a.currentTime=0,a.play())}).fail(function(e,t,r){$("#updateentry").removeClass("disabled"),$("#refreshState").fadeOut(200),Materialize.toast(404==e.status?lang.network_error:lang.error+r,2e3),a.currentTime=0,a.play()})):($("#modal5").openModal({in_duration:200,out_duration:100}),c.currentTime=0,c.play())}),$(document).on("click","#updatehelper:not(.disabled)",function(){$("#updatehelper").addClass("disabled"),$("#refreshState").fadeIn(200),$.ajax({url:"handleHelper.html",data:{post:$("#selpost").val()},dataType:"json",method:"post",cache:!1}).done(function(e){$("#updatehelper").removeClass("disabled"),1==e.success?(Materialize.toast(lang.item_updated,2e3),loadHelperPage(),o.currentTime=0,o.play()):0==e.success&&($("#refreshState").fadeOut(200),Materialize.toast(lang.error+"("+e.error.code+")"+e.error.message,2e3),a.currentTime=0,a.play())}).fail(function(e,t,r){$("#updatehelper").removeClass("disabled"),$("#refreshState").fadeOut(200),Materialize.toast(404==e.status?lang.network_error:lang.error+r,2e3),a.currentTime=0,a.play()})}),$(document).on("change","#lockentry",function(){olocked?0==$("#lockentry").prop("checked")&&($("#lockpwdinp").val(""),$("#errortext").text(""),$("#modal6").attr("data-mode","validate"),$("#modal6").openModal({dismissible:!1,in_duration:200,out_duration:100})):1==$("#lockentry").prop("checked")?($("#lockpwdinp").val(""),$("#errortext").text(""),$("#modal6").attr("data-mode","create"),$("#modal6").openModal({dismissible:!1,in_duration:200,out_duration:100})):$("#lockpwd").val("")}),$(document).on("click","#editent",function(){checkUniqueEnrollA()?($("#refreshState").fadeIn(200),$.ajax({url:"handleEnrollA.html",data:{firstiev:$("#afirstiev").val(),secondiev:$("#asecondiev").val(),thirdiev:$("#athirdiev").val(),rev:$("#rev").val().join(),id:$("#modal3").attr("data-id"),locked:$("#alockentry").prop("checked")?"1":"0"},dataType:"json",method:"post",cache:!1}).done(function(e){1==e.success?(Materialize.toast(lang.item_updated,2e3),$("#refreshState").fadeOut(200),o.currentTime=0,o.play()):0==e.success&&($("#refreshState").fadeOut(200),Materialize.toast(lang.error+"("+e.error.code+")"+e.error.message,2e3),a.currentTime=0,a.play())}).fail(function(e,t,r){$("#refreshState").fadeOut(200),Materialize.toast(404==e.status?lang.network_error:lang.error+r,2e3),a.currentTime=0,a.play()})):(Materialize.toast(lang.duplicate_selection,2e3),c.currentTime=0,c.play())}),$(document).on("click","#confirm:not(.disabled)",function(){$("#refreshState").fadeIn(200),$("#confirm").addClass("disabled"),$("#u").prop("disabled",!0),$("#u").material_select(),$("#p").prop("disabled",!0),$("#n").prop("disabled",!0),$.ajax({url:"handleLogin.html",data:{u:$("#u").val(),p:$("#p").val(),n:$("#n").val(),c:captchaValue},dataType:"json",method:"post",cache:!1}).done(function(e){"string"==typeof e?console.log(e):($("#confirm").removeClass("disabled"),$("#u").prop("disabled",!1),$("#u").material_select(),$("#p").prop("disabled",!1),$("#n").prop("disabled",!1),1==e.success?(usertype=e.type,Materialize.toast(lang.login_success,2e3),loadMainPage(),i.play()):0==e.success?($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_pwd,2e3),c.currentTime=0,c.play()):-1==e.success?($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_unknown,2e3),a.currentTime=0,a.play()):-2==e.success?($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_missing_info,2e3),b.currentTime=0,b.play()):-3==e.success?($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_not_ready,2e3),c.currentTime=0,c.play()):-4==e.success?($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_verification,2e3),console.log(e.error),console.log(e.jsontext),c.currentTime=0,c.play()):-5==e.success&&($("#refreshState").fadeOut(200),Materialize.toast(lang.login_error_blocked,2e3),c.currentTime=0,c.play()))}).fail(function(e,t,r){$("#confirm").removeClass("disabled"),$("#u").prop("disabled",!1),$("#p").prop("disabled",!1),$("#refreshState").fadeOut(200),console.log(e.responseText),Materialize.toast(404==e.status?lang.network_error:lang.error+r,2e3),a.currentTime=0,a.play()})}),$(document).on("click","#logoutLink",function(){$("#refreshState").fadeIn(200),$.ajax({url:"logout.html",cache:!1}).done(function(e){o.play(),usertype="",captchaValue="",Materialize.toast(lang.logout,2e3),loadMainPage()}).fail(function(e,t,r){$("#refreshState").fadeOut(200),Materialize.toast(404==e.status?lang.network_error:lang.error+r,2e3),a.currentTime=0,a.play()})}),$(document).on("click","#selent",function(){$("#refreshState").fadeIn(200),$.ajax({url:"editEntry.html",cache:!1,method:"post",data:{cls:$("#cls").val(),num:$("#num").val()}}).done(function(e){$("#entryDetails").html(e),$("#refreshState").fadeOut(200),$(".matsel").material_select(),$("#modal3").openModal({in_duration:200,out_duration:100})})}),$(document).on("change","#firstiev",function(){$(".matsel").material_select("destroy"),""==$("#firstiev").val()?($("#firstiev").val($("#secondiev").val()),$("#secondiev").val($("#thirdiev").val()),$("#thirdiev").val(""),""==$("#firstiev").val()&&$("#secondiev").prop("disabled",!0),""==$("#secondiev").val()&&$("#thirdiev").prop("disabled",!0)):$("#secondiev").prop("disabled",!1),$(".matsel").material_select()}),$(document).on("change","#secondiev",function(){$(".matsel").material_select("destroy"),""==$("#secondiev").val()?($("#secondiev").val($("#thirdiev").val()),$("#thirdiev").val(""),""==$("#secondiev").val()&&$("#thirdiev").prop("disabled",!0)):$("#thirdiev").prop("disabled",!1),$(".matsel").material_select()}),$(document).on("change","#afirstiev",function(){$(".matsel").material_select("destroy"),""==$("#afirstiev").val()?($("#afirstiev").val($("#asecondiev").val()),$("#asecondiev").val($("#athirdiev").val()),$("#athirdiev").val(""),""==$("#afirstiev").val()&&$("#asecondiev").prop("disabled",!0),""==$("#asecondiev").val()&&$("#athirdiev").prop("disabled",!0)):$("#asecondiev").prop("disabled",!1),$(".matsel").material_select()}),$(document).on("change","#asecondiev",function(){$(".matsel").material_select("destroy"),""==$("#asecondiev").val()?($("#asecondiev").val($("#thirdiev").val()),$("#athirdiev").val(""),""==$("#asecondiev").val()&&$("#athirdiev").prop("disabled",!0)):$("#athirdiev").prop("disabled",!1),$(".matsel").material_select()}),$(document).on("click",".delete-link",function(){$("#modal2").attr("data-id",$(this).attr("data-id")),$("#refreshState").fadeIn(200),$.ajax({url:"eventDetails.html",data:{id:$(this).attr("data-id")},dataType:"json",method:"post",cache:!1}).done(function(e){$("#eeid").removeClass("active"),$("#eename").removeClass("active"),$("#ecname").removeClass("active"),$("#eeid").val(e.id),$("#egrade").val(e.grade),$("#eename").val(e.ename),$("#ecname").val(e.cname),$("#eeid").addClass("active"),$("#eename").addClass("active"),$("#ecname").addClass("active"),$("#erelay").prop("checked","R"==e.type),$("#modal2").openModal({in_duration:200,out_duration:100}),$("#refreshState").fadeOut(200),$("#egrade").material_select(),$("#eeid").characterCounter()}).fail(function(e,t,r){$("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(404==e.status?lang.network_error:lang.error+r,2e3)})}),$(document).on("click","#refEvents",function(){$("#refreshState").fadeIn(200),loadEventsPage()}),$(document).on("click","#refEnroll",function(){$("#refreshState").fadeIn(200),loadEnrollPage()}),$(document).on("click","#refStat",function(){$("#refreshState").fadeIn(200),loadStatPage()}),$(document).on("click","#delev",function(){c.currentTime=0,c.play(),$("#deleid").text($("#modal2").attr("data-id")),$("#modal1").attr("data-id",$("#modal2").attr("data-id")),$("#modal2").closeModal(),$("#modal1").openModal({in_duration:200,out_duration:100})}),$("#modal1 .no-btn").click(function(){$("#modal2").openModal({in_duration:200,out_duration:100})}),$("#modal1 .yes-btn").click(function(){$("#refreshState").fadeIn(200),$.ajax({url:"handleEvent.html?method=delete",data:{id:$("#modal1").attr("data-id")},dataType:"json",method:"post",cache:!1}).done(function(e){1==e.success?(o.currentTime=0,o.play(),Materialize.toast(lang.item_deleted,2e3),loadEventsPage()):0==e.success?($("#refreshState").fadeOut(200),c.currentTime=0,c.play(),Materialize.toast(lang.error+"("+e.error.code+")"+e.error.message,2e3)):-2==e.success&&($("#refreshState").fadeOut(200),c.currentTime=0,c.play(),Materialize.toast(lang.action_no_priv,2e3))}).fail(function(e,t,r){$("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(404==e.status?lang.network_error:lang.error+r,2e3)})}),$("#editev").click(function(){$("#refreshState").fadeIn(200),console.log($("#erelay").prop("checked")?"R":"I"),$.ajax({url:"handleEvent.html?method=put",data:{id:$("#modal2").attr("data-id"),grade:$("#egrade").val(),ename:$("#eename").val(),cname:$("#ecname").val(),type:$("#erelay").prop("checked")?"R":"I"},dataType:"json",method:"post",cache:!1}).done(function(e){1==e.success?(o.currentTime=0,o.play(),console.log(e.q),Materialize.toast(lang.item_updated,2e3),loadEventsPage()):0==e.success?($("#refreshState").fadeOut(200),c.currentTime=0,c.play(),Materialize.toast(lang.error+"("+e.error.code+")"+e.error.message,2e3)):-2==e.success&&($("#refreshState").fadeOut(200),c.currentTime=0,c.play(),Materialize.toast(lang.action_no_priv,2e3))}).fail(function(e,t,r){$("#refreshState").fadeOut(200),a.currentTime=0,a.play(),Materialize.toast(404==e.status?lang.network_error:lang.error+r,2e3)})})});var captchaValue="",onloadCallback=function(){recaptchaAvailable=!0,recaptchacontainer&&grecaptcha.render(recaptchacontainer,{sitekey:"6LcbNxMTAAAAAJqw8rngqBFCofxVjUNdfzay7Rxj",callback:tryCaptcha,"expired-callback":captchaExp,type:"audio"})};